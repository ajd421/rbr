{"ast":null,"code":"import _objectSpread from\"/Users/adillon/rbrserv/rbrfinder/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/adillon/rbrserv/rbrfinder/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React,{useCallback,useEffect,useState}from'react';import{GoogleMap,useJsApiLoader,MarkerF,BicyclingLayerF,InfoWindowF}from'@react-google-maps/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var containerStyle={width:'100vw',height:'100vh'};var center={lat:29.717305869520487,lng:-95.40327808240264};var pos={lat:29.7187296,lng:-95.4035656};var printMarker=function printMarker(marker){console.log('marker: ',marker);};var parseWKTToLatLng=function parseWKTToLatLng(wkt){var regex=/POINT \\(([-\\d.]+) ([-\\d.]+)\\)/;var match=wkt.match(regex);if(match){return{lat:parseFloat(match[2]),lng:parseFloat(match[1])};}return null;};function Header(){return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rice University's Bike Rack Finder\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Looking for a bike rack next to a campus building? Look no further\"})]});}function MyComponent(){var _useJsApiLoader=useJsApiLoader({googleMapsApiKey:process.env.REACT_APP_API_KEY,id:'google-map-script',version:'weekly'}),isLoaded=_useJsApiLoader.isLoaded;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),markers=_useState4[0],setMarkers=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),openInfoWindowIndex=_useState8[0],setOpenInfoWindowIndex=_useState8[1];useEffect(function(){fetch(\"http://localhost:3001/data\").then(function(res){return res.json();}).then(function(data){// Add additional properties to each marker\nvar markersWithAdditionalInfo=data.map(function(marker){return _objectSpread(_objectSpread({},marker),{},{imageUrl:'https://transportation.rice.edu/sites/g/files/bxs3961/files/inline-images/SouthServery1.jpg',availabilityStatus:'Available',lastUpdated:'5 minutes ago',totalSpots:10,peakHours:'12 PM - 2 PM',securityRating:'High'});});//console.log('markersWithAdditionalInfo:', markersWithAdditionalInfo);\nsetData(markersWithAdditionalInfo);setMarkers(markersWithAdditionalInfo);});},[]);var handleMarkerClick=function handleMarkerClick(index){setOpenInfoWindowIndex(index);};var onLoad=useCallback(function callback(map){// This is just an example of getting and using the map instance!!! don't just blindly copy!\nvar bounds=new window.google.maps.LatLngBounds(center);map.setZoom(16);setMap(map);},[]);var onUnmount=useCallback(function callback(){setMap(null);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),isLoaded?/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:containerStyle,center:center,zoom:16,onLoad:onLoad,onUnmount:onUnmount,children:[/*#__PURE__*/_jsx(BicyclingLayerF,{}),markers.map(function(marker,index){var position=parseWKTToLatLng(marker.WKT);if(position){return/*#__PURE__*/_jsx(MarkerF,{icon:\"https://mt.google.com/vt/icon/name=icons/onion/SHARED-mymaps-container_4x.png,icons/onion/1522-bicycle_4x.png\",onLoad:printMarker,position:position,title:marker.name,onClick:function onClick(){return handleMarkerClick(index);},children:openInfoWindowIndex===index&&/*#__PURE__*/ // Conditionally render the InfoWindow\n_jsx(InfoWindowF,{onCloseClick:function onCloseClick(){return setOpenInfoWindowIndex(null);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:marker.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"GPS location: \",position.lat,\", \",position.lng]}),/*#__PURE__*/_jsx(\"img\",{src:marker.imageUrl,alt:\"Bike rack\",style:{width:'200px',height:'auto'}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Availability Status: \",marker.availabilityStatus,\" (last updated \",marker.lastUpdated,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Spots: \",marker.totalSpots]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Peak Hours: \",marker.peakHours]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Security Rating: \",marker.securityRating]})]})})},index);}return null;// Return null if the WKT string cannot be parsed\n})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"})]});}export default/*#__PURE__*/React.memo(MyComponent);","map":{"version":3,"names":["React","useCallback","useEffect","useState","GoogleMap","useJsApiLoader","MarkerF","BicyclingLayerF","InfoWindowF","jsx","_jsx","jsxs","_jsxs","containerStyle","width","height","center","lat","lng","pos","printMarker","marker","console","log","parseWKTToLatLng","wkt","regex","match","parseFloat","Header","className","children","MyComponent","_useJsApiLoader","googleMapsApiKey","process","env","REACT_APP_API_KEY","id","version","isLoaded","_useState","_useState2","_slicedToArray","map","setMap","_useState3","_useState4","markers","setMarkers","_useState5","_useState6","data","setData","_useState7","_useState8","openInfoWindowIndex","setOpenInfoWindowIndex","fetch","then","res","json","markersWithAdditionalInfo","_objectSpread","imageUrl","availabilityStatus","lastUpdated","totalSpots","peakHours","securityRating","handleMarkerClick","index","onLoad","callback","bounds","window","google","maps","LatLngBounds","setZoom","onUnmount","mapContainerStyle","zoom","position","WKT","icon","title","name","onClick","onCloseClick","src","alt","style","memo"],"sources":["/Users/adillon/rbrserv/rbrfinder/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { GoogleMap, useJsApiLoader, MarkerF, BicyclingLayerF, InfoWindowF} from '@react-google-maps/api';\n\n\nconst containerStyle = {\n  width: '100vw',\n  height: '100vh',\n};\n\nconst center = {\n  lat: 29.717305869520487, \n  lng: -95.40327808240264\n};\n\nconst pos = {\n  lat: 29.7187296,\n  lng: -95.4035656\n}\n\nconst printMarker = marker => {\n  console.log('marker: ', marker);\n}\n\nconst parseWKTToLatLng = (wkt) => {\n  const regex = /POINT \\(([-\\d.]+) ([-\\d.]+)\\)/;\n  const match = wkt.match(regex);\n  if (match) {\n    return { lat: parseFloat(match[2]), lng: parseFloat(match[1]) };\n  }\n  return null;\n};\n\nfunction Header() {\n  return (\n    <div className='header'>\n      <h1>Rice University's Bike Rack Finder</h1>\n      <h3>Looking for a bike rack next to a campus building? Look no further</h3>\n    </div>\n  );\n}\n\nfunction MyComponent() {\n  const { isLoaded } = useJsApiLoader({\n    googleMapsApiKey: process.env.REACT_APP_API_KEY, \n    id: 'google-map-script',\n    version: 'weekly'\n  });\n\n  const [map, setMap] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const [data, setData] = useState(null);\n  const [openInfoWindowIndex, setOpenInfoWindowIndex] = useState(null);\n\n  useEffect(() => {\n    fetch(\"http://localhost:3001/data\")\n      .then((res) => res.json())\n      .then((data) => {\n        // Add additional properties to each marker\n      const markersWithAdditionalInfo = data.map((marker) => ({\n        ...marker,\n        imageUrl: 'https://transportation.rice.edu/sites/g/files/bxs3961/files/inline-images/SouthServery1.jpg',\n        availabilityStatus: 'Available',\n        lastUpdated: '5 minutes ago',\n        totalSpots: 10,\n        peakHours: '12 PM - 2 PM',\n        securityRating: 'High',\n      }));\n        //console.log('markersWithAdditionalInfo:', markersWithAdditionalInfo);\n        setData(markersWithAdditionalInfo);\n        setMarkers(markersWithAdditionalInfo)\n      });\n  }, []);\n\n  const handleMarkerClick = (index) => {\n    setOpenInfoWindowIndex(index);\n  };\n\n  const onLoad = useCallback(function callback(map) {\n    // This is just an example of getting and using the map instance!!! don't just blindly copy!\n    const bounds = new window.google.maps.LatLngBounds(center);\n    map.setZoom(16);\n\n    setMap(map);\n  }, []);\n\n  const onUnmount = useCallback(function callback() {\n    setMap(null);\n  }, []);\n\n  return (\n    <div>\n      <Header />\n      {isLoaded ? (\n        <GoogleMap\n          mapContainerStyle={containerStyle}\n          center={center}\n          zoom={16}\n          onLoad={onLoad}\n          onUnmount={onUnmount}\n        >\n          <BicyclingLayerF\n          />\n          {markers.map((marker, index) => {\n            const position = parseWKTToLatLng(marker.WKT);\n            if (position) {\n              return (\n                <MarkerF\n                icon={\"https://mt.google.com/vt/icon/name=icons/onion/SHARED-mymaps-container_4x.png,icons/onion/1522-bicycle_4x.png\"}\n                onLoad={printMarker}\n                key={index}\n                position={position}\n                title={marker.name}\n                onClick={() => handleMarkerClick(index)}\n                >\n                  {openInfoWindowIndex === index && ( // Conditionally render the InfoWindow\n                    <InfoWindowF onCloseClick={() => setOpenInfoWindowIndex(null)}>\n                       <div>\n                      <h3>{marker.name}</h3>\n                      <p>GPS location: {position.lat}, {position.lng}</p>\n                      <img src={marker.imageUrl} alt=\"Bike rack\" style={{ width: '200px', height: 'auto' }} />\n                      <p>Availability Status: {marker.availabilityStatus} (last updated {marker.lastUpdated})</p>\n                      <p>Total Spots: {marker.totalSpots}</p>\n                      <p>Peak Hours: {marker.peakHours}</p>\n                      <p>Security Rating: {marker.securityRating}</p>\n                    </div>\n                    </InfoWindowF>\n                  )}\n                </MarkerF>\n              );\n            }\n            return null; // Return null if the WKT string cannot be parsed\n          })}\n        </GoogleMap>\n      ) : (\n        <div>Loading...</div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(MyComponent);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}